{"title":"Auto Code Walker Tour","steps":[{"filePath":"C:/Users/lazar/IdeaProjects/JB-plugin/src/main/java/com/hackathon/service/SelectionModeService.java","lineNum":351,"codeSnippet":"    private void detachFinishHud(Editor editor) {\n        FinishHud hud \u003d finishHuds.remove(editor);\n        if (hud !\u003d null) hud.detach();\n    }","authorNote":"","aiExplanation":"\u003ch3\u003eAuthor Note\u003c/h3\u003e\u003cp\u003e\u003c/p\u003e\u003ch3\u003eCode\u003c/h3\u003e\u003cpre\u003e    private void detachFinishHud(Editor editor) {\n        FinishHud hud \u003d finishHuds.remove(editor);\n        if (hud !\u003d null) hud.detach();\n    }\u003c/pre\u003e\u003cp\u003e\u003cem\u003e(Set OPENAI_API_KEY to enable AI explanations.)\u003c/em\u003e\u003c/p\u003e","endLine":354,"symbolName":"com.hackathon.service.SelectionModeService#detachFinishHud","type":"method"},{"filePath":"C:/Users/lazar/IdeaProjects/JB-plugin/src/main/java/com/hackathon/service/SelectionModeService.java","lineNum":356,"codeSnippet":"    private final class FinishHud extends JComponent {\n        private final Editor editor;\n        private final JButton finishBtn \u003d new JButton(\"Finish Tour\");\n        private final JButton clearBtn \u003d new JButton(\"Clear Selection\");\n        private final java.awt.event.ComponentListener compListener \u003d new java.awt.event.ComponentAdapter() {\n            @Override public void componentResized(java.awt.event.ComponentEvent e) { relayout(); }\n            @Override public void componentMoved(java.awt.event.ComponentEvent e) { relayout(); }\n        };\n\n        FinishHud(Editor editor) {\n            this.editor \u003d editor;\n            setLayout(null);\n            setOpaque(false);\n\n            // Finish Button\n            finishBtn.setText(\"Finish Tour\");\n            finishBtn.setBackground(new JBColor(new Color(0, 120, 215), new Color(0, 90, 180)));\n            finishBtn.setForeground(Color.WHITE);\n            finishBtn.setOpaque(true);\n            finishBtn.setBorderPainted(false);\n            finishBtn.setFont(finishBtn.getFont().deriveFont(Font.BOLD));\n            finishBtn.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\n            finishBtn.addActionListener(e -\u003e performFinalize());\n            add(finishBtn);\n\n            // Clear Button\n            clearBtn.setText(\"Clear Selection\");\n            clearBtn.setBackground(new JBColor(new Color(220, 220, 220), new Color(80, 80, 80)));\n            clearBtn.setForeground(new JBColor(Color.BLACK, Color.WHITE));\n            clearBtn.setOpaque(true);\n            clearBtn.setBorderPainted(false);\n            clearBtn.setFont(finishBtn.getFont());\n            clearBtn.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\n            clearBtn.addActionListener(e -\u003e performClear());\n            add(clearBtn);\n        }\n\n        void attach() {\n            JComponent comp \u003d editor.getComponent();\n            JRootPane root \u003d SwingUtilities.getRootPane(comp);\n            if (root \u003d\u003d null) return;\n            JLayeredPane layered \u003d root.getLayeredPane();\n            if (getParent() !\u003d layered) layered.add(this, JLayeredPane.POPUP_LAYER);\n            comp.addComponentListener(compListener);\n            relayout();\n        }\n\n        void detach() {\n            Container p \u003d getParent();\n            if (p !\u003d null) p.remove(this);\n            editor.getComponent().removeComponentListener(compListener);\n        }\n\n        private void relayout() {\n            JComponent comp \u003d editor.getComponent();\n            JRootPane root \u003d SwingUtilities.getRootPane(comp);\n            if (root \u003d\u003d null) return;\n            JLayeredPane layered \u003d root.getLayeredPane();\n\n            Point pt \u003d SwingUtilities.convertPoint(comp, 0, 0, layered);\n            setBounds(pt.x, pt.y, comp.getWidth(), comp.getHeight());\n\n            int btnW \u003d 140, btnH \u003d 30;\n            int gap \u003d 10;\n\n            int finishX \u003d getWidth() - btnW - 20;\n            int y \u003d getHeight() - btnH - 20;\n\n            finishBtn.setBounds(finishX, y, btnW, btnH);\n            clearBtn.setBounds(finishX - btnW - gap, y, btnW, btnH);\n\n            revalidate();\n            repaint();\n        }\n\n        private void performFinalize() {\n            // Invoke FinalizeTourAction programmatically in the context of the editor\n            AnAction action \u003d ActionManager.getInstance().getAction(\"com.hackathon.actions.FinalizeTourAction\");\n            if (action !\u003d null) {\n                DataContext ctx \u003d SimpleDataContext.builder()\n                        .add(CommonDataKeys.PROJECT, project)\n                        .add(CommonDataKeys.EDITOR, editor)\n                        .build();\n                AnActionEvent ev \u003d AnActionEvent.createEvent(ctx, action.getTemplatePresentation(), \"AutoCodeWalker.SelectionHud\", ActionUiKind.NONE, null);\n                //noinspection deprecation\n                ActionUtil.performActionDumbAwareWithCallbacks(action, ev);\n            }\n        }\n\n        private void performClear() {\n            TourStateService state \u003d project.getService(TourStateService.class);\n            state.clear();\n            refreshAllEditors();\n        }\n    }","authorNote":"","aiExplanation":"\u003ch3\u003eAuthor Note\u003c/h3\u003e\u003cp\u003e\u003c/p\u003e\u003ch3\u003eCode\u003c/h3\u003e\u003cpre\u003e    private final class FinishHud extends JComponent {\n        private final Editor editor;\n        private final JButton finishBtn \u003d new JButton(\"Finish Tour\");\n        private final JButton clearBtn \u003d new JButton(\"Clear Selection\");\n        private final java.awt.event.ComponentListener compListener \u003d new java.awt.event.ComponentAdapter() {\n            @Override public void componentResized(java.awt.event.ComponentEvent e) { relayout(); }\n            @Override public void componentMoved(java.awt.event.ComponentEvent e) { relayout(); }\n        };\n\n        FinishHud(Editor editor) {\n            this.editor \u003d editor;\n            setLayout(null);\n            setOpaque(false);\n\n            // Finish Button\n            finishBtn.setText(\"Finish Tour\");\n            finishBtn.setBackground(new JBColor(new Color(0, 120, 215), new Color(0, 90, 180)));\n            finishBtn.setForeground(Color.WHITE);\n            finishBtn.setOpaque(true);\n            finishBtn.setBorderPainted(false);\n            finishBtn.setFont(finishBtn.getFont().deriveFont(Font.BOLD));\n            finishBtn.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\n            finishBtn.addActionListener(e -\u0026gt; performFinalize());\n            add(finishBtn);\n\n            // Clear Button\n            clearBtn.setText(\"Clear Selection\");\n            clearBtn.setBackground(new JBColor(new Color(220, 220, 220), new Color(80, 80, 80)));\n            clearBtn.setForeground(new JBColor(Color.BLACK, Color.WHITE));\n            clearBtn.setOpaque(true);\n            clearBtn.setBorderPainted(false);\n            clearBtn.setFont(finishBtn.getFont());\n            clearBtn.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\n            clearBtn.addActionListener(e -\u0026gt; performClear());\n            add(clearBtn);\n        }\n\n        void attach() {\n            JComponent comp \u003d editor.getComponent();\n            JRootPane root \u003d SwingUtilities.getRootPane(comp);\n            if (root \u003d\u003d null) return;\n            JLayeredPane layered \u003d root.getLayeredPane();\n            if (getParent() !\u003d layered) layered.add(this, JLayeredPane.POPUP_LAYER);\n            comp.addComponentListener(compListener);\n            relayout();\n        }\n\n        void detach() {\n            Container p \u003d getParent();\n            if (p !\u003d null) p.remove(this);\n            editor.getComponent().removeComponentListener(compListener);\n        }\n\n        private void relayout() {\n            JComponent comp \u003d editor.getComponent();\n            JRootPane root \u003d SwingUtilities.getRootPane(comp);\n            if (root \u003d\u003d null) return;\n            JLayeredPane layered \u003d root.getLayeredPane();\n\n            Point pt \u003d SwingUtilities.convertPoint(comp, 0, 0, layered);\n            setBounds(pt.x, pt.y, comp.getWidth(), comp.getHeight());\n\n            int btnW \u003d 140, btnH \u003d 30;\n            int gap \u003d 10;\n\n            int finishX \u003d getWidth() - btnW - 20;\n            int y \u003d getHeight() - btnH - 20;\n\n            finishBtn.setBounds(finishX, y, btnW, btnH);\n            clearBtn.setBounds(finishX - btnW - gap, y, btnW, btnH);\n\n            revalidate();\n            repaint();\n        }\n\n        private void performFinalize() {\n            // Invoke FinalizeTourAction programmatically in the context of the editor\n            AnAction action \u003d ActionManager.getInstance().getAction(\"com.hackathon.actions.FinalizeTourAction\");\n            if (action !\u003d null) {\n                DataContext ctx \u003d SimpleDataContext.builder()\n                        .add(CommonDataKeys.PROJECT, project)\n                        .add(CommonDataKeys.EDITOR, editor)\n                        .build();\n                AnActionEvent ev \u003d AnActionEvent.createEvent(ctx, action.getTemplatePresentation(), \"AutoCodeWalker.SelectionHud\", ActionUiKind.NONE, null);\n                //noinspection deprecation\n                ActionUtil.performActionDumbAwareWithCallbacks(action, ev);\n            }\n        }\n\n        private void performClear() {\n            TourStateService state \u003d project.getService(TourStateService.class);\n            state.clear();\n            refreshAllEditors();\n        }\n    }\u003c/pre\u003e\u003cp\u003e\u003cem\u003e(Set OPENAI_API_KEY to enable AI explanations.)\u003c/em\u003e\u003c/p\u003e","endLine":450,"symbolName":"com.hackathon.service.SelectionModeService.FinishHud","type":"class"}]}