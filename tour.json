{"title":"new tour","steps":[{"filePath":"C:/Users/lazar/IdeaProjects/JB-plugin/src/main/java/com/hackathon/service/SelectionModeService.java","lineNum":321,"codeSnippet":"    static final class NumberIcon implements Icon {\n        private final int number;\n        private final int size \u003d 16;\n        NumberIcon(int number) { this.number \u003d number; }\n        @Override public void paintIcon(Component c, Graphics g, int x, int y) {\n            Graphics2D g2 \u003d (Graphics2D) g.create();\n            g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n            g2.setColor(new JBColor(new Color(0, 120, 215), new Color(0, 120, 215))); // Windows blue\n            g2.fillOval(x, y, size, size);\n            g2.setColor(JBColor.WHITE);\n            String s \u003d String.valueOf(number);\n            FontMetrics fm \u003d g2.getFontMetrics();\n            int tx \u003d x + (size - fm.stringWidth(s)) / 2;\n            int ty \u003d y + (size + fm.getAscent() - fm.getDescent()) / 2 - 1;\n            g2.drawString(s, tx, ty);\n            g2.dispose();\n        }\n        @Override public int getIconWidth() { return size; }\n        @Override public int getIconHeight() { return size; }\n    }","authorNote":"/** Draws a blue circle badge with the step number. */","aiExplanation":"\u003ch3\u003eSummary\u003c/h3\u003e\u003cp\u003eThe NumberIcon class implements the Icon interface to create a circular badge displaying a step number. It draws a blue circle and centers the number within it, utilizing anti-aliasing for smoother edges. The icon has a fixed size of 16 pixels. Example usage: new NumberIcon(5).paintIcon(component, graphics, x, y).\u003c/p\u003e","endLine":340,"symbolName":"com.hackathon.service.SelectionModeService.NumberIcon","type":"class"},{"filePath":"C:/Users/lazar/IdeaProjects/JB-plugin/src/main/java/com/hackathon/service/SelectionModeService.java","lineNum":325,"codeSnippet":"        @Override public void paintIcon(Component c, Graphics g, int x, int y) {\n            Graphics2D g2 \u003d (Graphics2D) g.create();\n            g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n            g2.setColor(new JBColor(new Color(0, 120, 215), new Color(0, 120, 215))); // Windows blue\n            g2.fillOval(x, y, size, size);\n            g2.setColor(JBColor.WHITE);\n            String s \u003d String.valueOf(number);\n            FontMetrics fm \u003d g2.getFontMetrics();\n            int tx \u003d x + (size - fm.stringWidth(s)) / 2;\n            int ty \u003d y + (size + fm.getAscent() - fm.getDescent()) / 2 - 1;\n            g2.drawString(s, tx, ty);\n            g2.dispose();\n        }","authorNote":"","aiExplanation":"\u003ch3\u003eSummary\u003c/h3\u003e\u003cp\u003eThis method overrides the paintIcon function to draw a circular icon with a specified number in the center. It utilizes anti-aliasing for smoother edges and custom colors for the icon and text. The icon is drawn at specified coordinates, and the number is centered within the circle. Example call: customIcon.paintIcon(component, graphics, xCoordinate, yCoordinate).\u003c/p\u003e","endLine":337,"symbolName":"com.hackathon.service.SelectionModeService.NumberIcon#paintIcon","type":"method"},{"filePath":"C:/Users/lazar/IdeaProjects/JB-plugin/src/main/java/com/hackathon/service/SelectionModeService.java","lineNum":343,"codeSnippet":"    private void attachFinishHud(Editor editor) {\n        if (editor \u003d\u003d null || editor.getProject() \u003d\u003d null) return;\n        if (finishHuds.containsKey(editor)) return;\n        FinishHud hud \u003d new FinishHud(editor);\n        finishHuds.put(editor, hud);\n        hud.attach();\n    }","authorNote":"","aiExplanation":"\u003ch3\u003eSummary\u003c/h3\u003e\u003cp\u003eThis method attaches a Finish HUD to a given editor if certain conditions are met, such as the editor being non-null and not already having a HUD attached. It creates a new Finish HUD instance and stores it in a map for future reference. Example call: attachFinishHud(editorInstance).\u003c/p\u003e","endLine":349,"symbolName":"com.hackathon.service.SelectionModeService#attachFinishHud","type":"method"},{"filePath":"C:/Users/lazar/IdeaProjects/JB-plugin/src/main/java/com/hackathon/service/SelectionModeService.java","lineNum":351,"codeSnippet":"    private void detachFinishHud(Editor editor) {\n        FinishHud hud \u003d finishHuds.remove(editor);\n        if (hud !\u003d null) hud.detach();\n    }","authorNote":"","aiExplanation":"\u003ch3\u003eSummary\u003c/h3\u003e\u003cp\u003eThis method removes a FinishHud instance associated with a given Editor from a collection and calls its detach method if it exists. Example call: detachFinishHud(editorInstance).\u003c/p\u003e","endLine":354,"symbolName":"com.hackathon.service.SelectionModeService#detachFinishHud","type":"method"},{"filePath":"C:/Users/lazar/IdeaProjects/JB-plugin/src/main/java/com/hackathon/service/SelectionModeService.java","lineNum":356,"codeSnippet":"    private final class FinishHud extends JComponent {\n        private final Editor editor;\n        private final JButton finishBtn \u003d new JButton(\"Finish Tour\");\n        private final JButton clearBtn \u003d new JButton(\"Clear Selection\");\n        private final java.awt.event.ComponentListener compListener \u003d new java.awt.event.ComponentAdapter() {\n            @Override public void componentResized(java.awt.event.ComponentEvent e) { relayout(); }\n            @Override public void componentMoved(java.awt.event.ComponentEvent e) { relayout(); }\n        };\n\n        FinishHud(Editor editor) {\n            this.editor \u003d editor;\n            setLayout(null);\n            setOpaque(false);\n\n            // Finish Button\n            finishBtn.setText(\"Finish Tour\");\n            finishBtn.setBackground(new JBColor(new Color(0, 120, 215), new Color(0, 90, 180)));\n            finishBtn.setForeground(Color.WHITE);\n            finishBtn.setOpaque(true);\n            finishBtn.setBorderPainted(false);\n            finishBtn.setFont(finishBtn.getFont().deriveFont(Font.BOLD));\n            finishBtn.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\n            finishBtn.addActionListener(e -\u003e performFinalize());\n            add(finishBtn);\n\n            // Clear Button\n            clearBtn.setText(\"Clear Selection\");\n            clearBtn.setBackground(new JBColor(new Color(220, 220, 220), new Color(80, 80, 80)));\n            clearBtn.setForeground(new JBColor(Color.BLACK, Color.WHITE));\n            clearBtn.setOpaque(true);\n            clearBtn.setBorderPainted(false);\n            clearBtn.setFont(finishBtn.getFont());\n            clearBtn.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\n            clearBtn.addActionListener(e -\u003e performClear());\n            add(clearBtn);\n        }\n\n        void attach() {\n            JComponent comp \u003d editor.getComponent();\n            JRootPane root \u003d SwingUtilities.getRootPane(comp);\n            if (root \u003d\u003d null) return;\n            JLayeredPane layered \u003d root.getLayeredPane();\n            if (getParent() !\u003d layered) layered.add(this, JLayeredPane.POPUP_LAYER);\n            comp.addComponentListener(compListener);\n            relayout();\n        }\n\n        void detach() {\n            Container p \u003d getParent();\n            if (p !\u003d null) p.remove(this);\n            editor.getComponent().removeComponentListener(compListener);\n        }\n\n        private void relayout() {\n            JComponent comp \u003d editor.getComponent();\n            JRootPane root \u003d SwingUtilities.getRootPane(comp);\n            if (root \u003d\u003d null) return;\n            JLayeredPane layered \u003d root.getLayeredPane();\n\n            Point pt \u003d SwingUtilities.convertPoint(comp, 0, 0, layered);\n            setBounds(pt.x, pt.y, comp.getWidth(), comp.getHeight());\n\n            int btnW \u003d 140, btnH \u003d 30;\n            int gap \u003d 10;\n\n            int finishX \u003d getWidth() - btnW - 20;\n            int y \u003d getHeight() - btnH - 20;\n\n            finishBtn.setBounds(finishX, y, btnW, btnH);\n            clearBtn.setBounds(finishX - btnW - gap, y, btnW, btnH);\n\n            revalidate();\n            repaint();\n        }\n\n        private void performFinalize() {\n            // Invoke FinalizeTourAction programmatically in the context of the editor\n            AnAction action \u003d ActionManager.getInstance().getAction(\"com.hackathon.actions.FinalizeTourAction\");\n            if (action !\u003d null) {\n                DataContext ctx \u003d SimpleDataContext.builder()\n                        .add(CommonDataKeys.PROJECT, project)\n                        .add(CommonDataKeys.EDITOR, editor)\n                        .build();\n                AnActionEvent ev \u003d AnActionEvent.createEvent(ctx, action.getTemplatePresentation(), \"AutoCodeWalker.SelectionHud\", ActionUiKind.NONE, null);\n                //noinspection deprecation\n                ActionUtil.performActionDumbAwareWithCallbacks(action, ev);\n            }\n        }\n\n        private void performClear() {\n            TourStateService state \u003d project.getService(TourStateService.class);\n            state.clear();\n            refreshAllEditors();\n        }\n    }","authorNote":"","aiExplanation":"\u003ch3\u003eSummary\u003c/h3\u003e\u003cp\u003eThe FinishHud class is a custom Swing component that provides a user interface for finalizing and clearing selections in an editor context. It includes two buttons: \u0027Finish Tour\u0027 to complete the current tour and \u0027Clear Selection\u0027 to reset the selection. The component adjusts its layout dynamically based on the editor\u0027s size and position. Example usage: Create an instance of FinishHud and call attach() to display it in the editor.\u003c/p\u003e","endLine":450,"symbolName":"com.hackathon.service.SelectionModeService.FinishHud","type":"class"},{"filePath":"C:/Users/lazar/IdeaProjects/JB-plugin/src/main/java/com/hackathon/service/SelectionModeService.java","lineNum":403,"codeSnippet":"        void detach() {\n            Container p \u003d getParent();\n            if (p !\u003d null) p.remove(this);\n            editor.getComponent().removeComponentListener(compListener);\n        }","authorNote":"","aiExplanation":"\u003ch3\u003eSummary\u003c/h3\u003e\u003cp\u003eThis method is responsible for detaching the current component from its parent container. It first retrieves the parent container and, if it exists, removes the current component from it. Additionally, it removes a component listener associated with the editor. Example call: detach().\u003c/p\u003e","endLine":407,"symbolName":"com.hackathon.service.SelectionModeService.FinishHud#detach","type":"method"},{"filePath":"C:/Users/lazar/IdeaProjects/JB-plugin/src/main/java/com/hackathon/service/SelectionModeService.java","lineNum":393,"codeSnippet":"        void attach() {\n            JComponent comp \u003d editor.getComponent();\n            JRootPane root \u003d SwingUtilities.getRootPane(comp);\n            if (root \u003d\u003d null) return;\n            JLayeredPane layered \u003d root.getLayeredPane();\n            if (getParent() !\u003d layered) layered.add(this, JLayeredPane.POPUP_LAYER);\n            comp.addComponentListener(compListener);\n            relayout();\n        }","authorNote":"","aiExplanation":"\u003ch3\u003eSummary\u003c/h3\u003e\u003cp\u003eThis method attaches a component to a layered pane within a Swing application. It retrieves the root pane of the component, checks if it is not already a parent of the layered pane, and adds itself to the popup layer. Additionally, it adds a component listener to the component and calls a relayout method to adjust the layout. Example call: attach();\u003c/p\u003e","endLine":401,"symbolName":"com.hackathon.service.SelectionModeService.FinishHud#attach","type":"method"},{"filePath":"C:/Users/lazar/IdeaProjects/JB-plugin/src/main/java/com/hackathon/service/SelectionModeService.java","lineNum":409,"codeSnippet":"private void relayout() {\n            JComponent comp \u003d editor.getComponent();\n            JRootPane root \u003d SwingUtilities.getRootPane(comp);\n            if (root \u003d\u003d null) return;\n            JLayeredPane layered \u003d root.getLayeredPane();","authorNote":"Manual input","aiExplanation":"\u003ch3\u003eSummary\u003c/h3\u003e\u003cp\u003eThis method is responsible for adjusting the layout of a component within a Swing application. It retrieves the root pane of the component and accesses its layered pane for potential layout adjustments. Example call: relayout().\u003c/p\u003e","endLine":413,"type":"manual"}]}