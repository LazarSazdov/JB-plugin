{"title":"Auto Code Walker Tour","steps":[{"filePath":"C:/Users/milan/OneDrive/Desktop/Plugin ORIGINAL/JB-plugin/src/main/java/com/hackathon/actions/AddStepAction.java","lineNum":20,"codeSnippet":"public class AddStepAction extends AnAction {\n    @Override\n    public @NotNull ActionUpdateThread getActionUpdateThread() {\n        return ActionUpdateThread.BGT;\n    }\n\n    @Override\n    public void update(@NotNull AnActionEvent e) {\n        Editor editor \u003d e.getData(CommonDataKeys.EDITOR);\n        boolean visible \u003d false;\n        if (editor !\u003d null \u0026\u0026 editor.getProject() !\u003d null) {\n            com.hackathon.service.SelectionModeService sel \u003d editor.getProject().getService(com.hackathon.service.SelectionModeService.class);\n            visible \u003d sel !\u003d null \u0026\u0026 sel.isEnabled();\n        }\n        e.getPresentation().setEnabledAndVisible(visible);\n    }\n\n    @Override\n    public void actionPerformed(@NotNull AnActionEvent e) {\n        Project project \u003d e.getProject();\n        if (project \u003d\u003d null) return;\n        Editor editor \u003d e.getData(CommonDataKeys.EDITOR);\n        PsiFile psiFile \u003d e.getData(CommonDataKeys.PSI_FILE);\n        if (editor \u003d\u003d null || psiFile \u003d\u003d null) return;\n\n        VirtualFile vFile \u003d psiFile.getVirtualFile();\n        if (vFile \u003d\u003d null) return;\n\n        Document document \u003d editor.getDocument();\n        SelectionModel sel \u003d editor.getSelectionModel();\n        CaretModel caret \u003d editor.getCaretModel();\n        int start;\n        int end;\n        String code;\n        if (sel.hasSelection()) {\n            start \u003d sel.getSelectionStart();\n            end \u003d sel.getSelectionEnd();\n            code \u003d sel.getSelectedText();\n            if (code \u003d\u003d null) code \u003d \"\";\n        } else {\n            int offset \u003d caret.getOffset();\n            int line \u003d document.getLineNumber(offset);\n            start \u003d document.getLineStartOffset(line);\n            end \u003d document.getLineEndOffset(line);\n            code \u003d document.getText().substring(start, end);\n        }\n\n        int lineNum \u003d document.getLineNumber(start) + 1;\n        int endLineNum \u003d document.getLineNumber(end) + 1;\n\n        StepCreationDialog dialog \u003d new StepCreationDialog(project);\n        if (!dialog.showAndGet()) {\n            return;\n        }\n        String note \u003d dialog.getNote();\n\n        OpenAIService ai \u003d com.intellij.openapi.application.ApplicationManager.getApplication().getService(OpenAIService.class);\n        var result \u003d ai.generateExplanation(code, note);\n        String explanation \u003d result.htmlContent();\n\n        TourStep step \u003d new TourStep(vFile.getPath(), lineNum, code, note, explanation, endLineNum, null, \"manual\");\n\n        TourStateService state \u003d project.getService(TourStateService.class);\n        state.addStep(step);\n        if (state.getSteps().size() \u003d\u003d 1) {\n            state.setTitle(result.title());\n        }\n    }\n}","authorNote":"","aiExplanation":"\u003ch3\u003eAuthor Note\u003c/h3\u003e\u003cp\u003e\u003c/p\u003e\u003ch3\u003eCode\u003c/h3\u003e\u003cpre\u003epublic class AddStepAction extends AnAction {\n    @Override\n    public @NotNull ActionUpdateThread getActionUpdateThread() {\n        return ActionUpdateThread.BGT;\n    }\n\n    @Override\n    public void update(@NotNull AnActionEvent e) {\n        Editor editor \u003d e.getData(CommonDataKeys.EDITOR);\n        boolean visible \u003d false;\n        if (editor !\u003d null \u0026amp;\u0026amp; editor.getProject() !\u003d null) {\n            com.hackathon.service.SelectionModeService sel \u003d editor.getProject().getService(com.hackathon.service.SelectionModeService.class);\n            visible \u003d sel !\u003d null \u0026amp;\u0026amp; sel.isEnabled();\n        }\n        e.getPresentation().setEnabledAndVisible(visible);\n    }\n\n    @Override\n    public void actionPerformed(@NotNull AnActionEvent e) {\n        Project project \u003d e.getProject();\n        if (project \u003d\u003d null) return;\n        Editor editor \u003d e.getData(CommonDataKeys.EDITOR);\n        PsiFile psiFile \u003d e.getData(CommonDataKeys.PSI_FILE);\n        if (editor \u003d\u003d null || psiFile \u003d\u003d null) return;\n\n        VirtualFile vFile \u003d psiFile.getVirtualFile();\n        if (vFile \u003d\u003d null) return;\n\n        Document document \u003d editor.getDocument();\n        SelectionModel sel \u003d editor.getSelectionModel();\n        CaretModel caret \u003d editor.getCaretModel();\n        int start;\n        int end;\n        String code;\n        if (sel.hasSelection()) {\n            start \u003d sel.getSelectionStart();\n            end \u003d sel.getSelectionEnd();\n            code \u003d sel.getSelectedText();\n            if (code \u003d\u003d null) code \u003d \"\";\n        } else {\n            int offset \u003d caret.getOffset();\n            int line \u003d document.getLineNumber(offset);\n            start \u003d document.getLineStartOffset(line);\n            end \u003d document.getLineEndOffset(line);\n            code \u003d document.getText().substring(start, end);\n        }\n\n        int lineNum \u003d document.getLineNumber(start) + 1;\n        int endLineNum \u003d document.getLineNumber(end) + 1;\n\n        StepCreationDialog dialog \u003d new StepCreationDialog(project);\n        if (!dialog.showAndGet()) {\n            return;\n        }\n        String note \u003d dialog.getNote();\n\n        OpenAIService ai \u003d com.intellij.openapi.application.ApplicationManager.getApplication().getService(OpenAIService.class);\n        var result \u003d ai.generateExplanation(code, note);\n        String explanation \u003d result.htmlContent();\n\n        TourStep step \u003d new TourStep(vFile.getPath(), lineNum, code, note, explanation, endLineNum, null, \"manual\");\n\n        TourStateService state \u003d project.getService(TourStateService.class);\n        state.addStep(step);\n        if (state.getSteps().size() \u003d\u003d 1) {\n            state.setTitle(result.title());\n        }\n    }\n}\u003c/pre\u003e\u003cp\u003e\u003cem\u003e(Set OPENAI_API_KEY to enable AI explanations.)\u003c/em\u003e\u003c/p\u003e","endLine":88,"symbolName":"com.hackathon.actions.AddStepAction","type":"class"},{"filePath":"C:/Users/milan/OneDrive/Desktop/Plugin ORIGINAL/JB-plugin/src/main/java/com/hackathon/actions/ClearTourSelectionsAction.java","lineNum":15,"codeSnippet":"public class ClearTourSelectionsAction extends AnAction {\n    @Override\n    public @NotNull ActionUpdateThread getActionUpdateThread() {\n        return ActionUpdateThread.BGT;\n    }\n\n    @Override\n    public void update(@NotNull AnActionEvent e) {\n        Project project \u003d e.getProject();\n        boolean visible \u003d false;\n        if (project !\u003d null) {\n            SelectionModeService sel \u003d project.getService(SelectionModeService.class);\n            TourStateService state \u003d project.getService(TourStateService.class);\n            visible \u003d sel !\u003d null \u0026\u0026 sel.isEnabled() \u0026\u0026 state !\u003d null \u0026\u0026 !state.getSteps().isEmpty();\n        }\n        e.getPresentation().setEnabledAndVisible(visible);\n    }\n\n    @Override\n    public void actionPerformed(@NotNull AnActionEvent e) {\n        Project project \u003d e.getProject();\n        if (project \u003d\u003d null) return;\n        TourStateService state \u003d project.getService(TourStateService.class);\n        state.clear();\n        SelectionModeService sel \u003d project.getService(SelectionModeService.class);\n        if (sel !\u003d null) {\n            sel.setEnabled(false);\n        }\n    }\n}","authorNote":"/**\n * Clears all current tour selections while in selection mode.\n */","aiExplanation":"\u003ch3\u003eAuthor Note\u003c/h3\u003e\u003cp\u003e/**\n * Clears all current tour selections while in selection mode.\n */\u003c/p\u003e\u003ch3\u003eCode\u003c/h3\u003e\u003cpre\u003epublic class ClearTourSelectionsAction extends AnAction {\n    @Override\n    public @NotNull ActionUpdateThread getActionUpdateThread() {\n        return ActionUpdateThread.BGT;\n    }\n\n    @Override\n    public void update(@NotNull AnActionEvent e) {\n        Project project \u003d e.getProject();\n        boolean visible \u003d false;\n        if (project !\u003d null) {\n            SelectionModeService sel \u003d project.getService(SelectionModeService.class);\n            TourStateService state \u003d project.getService(TourStateService.class);\n            visible \u003d sel !\u003d null \u0026amp;\u0026amp; sel.isEnabled() \u0026amp;\u0026amp; state !\u003d null \u0026amp;\u0026amp; !state.getSteps().isEmpty();\n        }\n        e.getPresentation().setEnabledAndVisible(visible);\n    }\n\n    @Override\n    public void actionPerformed(@NotNull AnActionEvent e) {\n        Project project \u003d e.getProject();\n        if (project \u003d\u003d null) return;\n        TourStateService state \u003d project.getService(TourStateService.class);\n        state.clear();\n        SelectionModeService sel \u003d project.getService(SelectionModeService.class);\n        if (sel !\u003d null) {\n            sel.setEnabled(false);\n        }\n    }\n}\u003c/pre\u003e\u003cp\u003e\u003cem\u003e(Set OPENAI_API_KEY to enable AI explanations.)\u003c/em\u003e\u003c/p\u003e","endLine":44,"symbolName":"com.hackathon.actions.ClearTourSelectionsAction","type":"class"},{"filePath":"C:/Users/milan/OneDrive/Desktop/Plugin ORIGINAL/JB-plugin/src/main/java/com/hackathon/actions/ClearTourSelectionsAction.java","lineNum":34,"codeSnippet":"    public void actionPerformed(@NotNull AnActionEvent e) {\n        Project project \u003d e.getProject();\n        if (project \u003d\u003d null) return;\n        TourStateService state \u003d project.getService(TourStateService.class);\n        state.clear();\n        SelectionModeService sel \u003d project.getService(SelectionModeService.class);\n        if (sel !\u003d null) {\n            sel.setEnabled(false);\n        }\n    }","authorNote":"","aiExplanation":"\u003ch3\u003eAuthor Note\u003c/h3\u003e\u003cp\u003e\u003c/p\u003e\u003ch3\u003eCode\u003c/h3\u003e\u003cpre\u003e    public void actionPerformed(@NotNull AnActionEvent e) {\n        Project project \u003d e.getProject();\n        if (project \u003d\u003d null) return;\n        TourStateService state \u003d project.getService(TourStateService.class);\n        state.clear();\n        SelectionModeService sel \u003d project.getService(SelectionModeService.class);\n        if (sel !\u003d null) {\n            sel.setEnabled(false);\n        }\n    }\u003c/pre\u003e\u003cp\u003e\u003cem\u003e(Set OPENAI_API_KEY to enable AI explanations.)\u003c/em\u003e\u003c/p\u003e","endLine":43,"symbolName":"com.hackathon.actions.ClearTourSelectionsAction#actionPerformed","type":"method"},{"filePath":"C:/Users/milan/OneDrive/Desktop/Plugin ORIGINAL/JB-plugin/src/main/java/com/hackathon/actions/ClearTourSelectionsAction.java","lineNum":22,"codeSnippet":"    public void update(@NotNull AnActionEvent e) {\n        Project project \u003d e.getProject();\n        boolean visible \u003d false;\n        if (project !\u003d null) {\n            SelectionModeService sel \u003d project.getService(SelectionModeService.class);\n            TourStateService state \u003d project.getService(TourStateService.class);\n            visible \u003d sel !\u003d null \u0026\u0026 sel.isEnabled() \u0026\u0026 state !\u003d null \u0026\u0026 !state.getSteps().isEmpty();\n        }\n        e.getPresentation().setEnabledAndVisible(visible);\n    }","authorNote":"","aiExplanation":"\u003ch3\u003eAuthor Note\u003c/h3\u003e\u003cp\u003e\u003c/p\u003e\u003ch3\u003eCode\u003c/h3\u003e\u003cpre\u003e    public void update(@NotNull AnActionEvent e) {\n        Project project \u003d e.getProject();\n        boolean visible \u003d false;\n        if (project !\u003d null) {\n            SelectionModeService sel \u003d project.getService(SelectionModeService.class);\n            TourStateService state \u003d project.getService(TourStateService.class);\n            visible \u003d sel !\u003d null \u0026amp;\u0026amp; sel.isEnabled() \u0026amp;\u0026amp; state !\u003d null \u0026amp;\u0026amp; !state.getSteps().isEmpty();\n        }\n        e.getPresentation().setEnabledAndVisible(visible);\n    }\u003c/pre\u003e\u003cp\u003e\u003cem\u003e(Set OPENAI_API_KEY to enable AI explanations.)\u003c/em\u003e\u003c/p\u003e","endLine":31,"symbolName":"com.hackathon.actions.ClearTourSelectionsAction#update","type":"method"},{"filePath":"C:/Users/milan/OneDrive/Desktop/Plugin ORIGINAL/JB-plugin/src/main/java/com/hackathon/actions/ClearTourSelectionsAction.java","lineNum":17,"codeSnippet":"    public @NotNull ActionUpdateThread getActionUpdateThread() {\n        return ActionUpdateThread.BGT;\n    }","authorNote":"","aiExplanation":"\u003ch3\u003eAuthor Note\u003c/h3\u003e\u003cp\u003e\u003c/p\u003e\u003ch3\u003eCode\u003c/h3\u003e\u003cpre\u003e    public @NotNull ActionUpdateThread getActionUpdateThread() {\n        return ActionUpdateThread.BGT;\n    }\u003c/pre\u003e\u003cp\u003e\u003cem\u003e(Set OPENAI_API_KEY to enable AI explanations.)\u003c/em\u003e\u003c/p\u003e","endLine":19,"symbolName":"com.hackathon.actions.ClearTourSelectionsAction#getActionUpdateThread","type":"method"},{"filePath":"C:/Users/milan/OneDrive/Desktop/Plugin ORIGINAL/JB-plugin/src/main/java/com/hackathon/actions/EndTourAction.java","lineNum":15,"codeSnippet":"public class EndTourAction extends AnAction {\n    @Override\n    public @NotNull ActionUpdateThread getActionUpdateThread() {\n        return ActionUpdateThread.BGT;\n    }\n\n    @Override\n    public void update(@NotNull AnActionEvent e) {\n        Project project \u003d e.getProject();\n        boolean visible \u003d false;\n        if (project !\u003d null) {\n            // Hide if selection mode is active\n            SelectionModeService sel \u003d project.getService(SelectionModeService.class);\n            if (sel !\u003d null \u0026\u0026 sel.isEnabled()) {\n                e.getPresentation().setEnabledAndVisible(false);\n                return;\n            }\n\n            TourStateService state \u003d project.getService(TourStateService.class);\n            // Visible if tour has steps (is loaded)\n            visible \u003d state !\u003d null \u0026\u0026 !state.getSteps().isEmpty();\n        }\n        e.getPresentation().setEnabledAndVisible(visible);\n    }\n\n    @Override\n    public void actionPerformed(@NotNull AnActionEvent e) {\n        Project project \u003d e.getProject();\n        if (project \u003d\u003d null) return;\n\n        TourStateService state \u003d project.getService(TourStateService.class);\n        state.clear(); // Clear steps and index\n\n        EditorNavigationService.clearHighlight();\n        TourOverlayManager.hideAll();\n\n        // Hide tool window\n        ToolWindow toolWindow \u003d ToolWindowManager.getInstance(project).getToolWindow(\"Auto Code Walker\");\n        if (toolWindow !\u003d null) {\n            toolWindow.hide(null);\n        }\n    }\n}","authorNote":"","aiExplanation":"\u003ch3\u003eAuthor Note\u003c/h3\u003e\u003cp\u003e\u003c/p\u003e\u003ch3\u003eCode\u003c/h3\u003e\u003cpre\u003epublic class EndTourAction extends AnAction {\n    @Override\n    public @NotNull ActionUpdateThread getActionUpdateThread() {\n        return ActionUpdateThread.BGT;\n    }\n\n    @Override\n    public void update(@NotNull AnActionEvent e) {\n        Project project \u003d e.getProject();\n        boolean visible \u003d false;\n        if (project !\u003d null) {\n            // Hide if selection mode is active\n            SelectionModeService sel \u003d project.getService(SelectionModeService.class);\n            if (sel !\u003d null \u0026amp;\u0026amp; sel.isEnabled()) {\n                e.getPresentation().setEnabledAndVisible(false);\n                return;\n            }\n\n            TourStateService state \u003d project.getService(TourStateService.class);\n            // Visible if tour has steps (is loaded)\n            visible \u003d state !\u003d null \u0026amp;\u0026amp; !state.getSteps().isEmpty();\n        }\n        e.getPresentation().setEnabledAndVisible(visible);\n    }\n\n    @Override\n    public void actionPerformed(@NotNull AnActionEvent e) {\n        Project project \u003d e.getProject();\n        if (project \u003d\u003d null) return;\n\n        TourStateService state \u003d project.getService(TourStateService.class);\n        state.clear(); // Clear steps and index\n\n        EditorNavigationService.clearHighlight();\n        TourOverlayManager.hideAll();\n\n        // Hide tool window\n        ToolWindow toolWindow \u003d ToolWindowManager.getInstance(project).getToolWindow(\"Auto Code Walker\");\n        if (toolWindow !\u003d null) {\n            toolWindow.hide(null);\n        }\n    }\n}\u003c/pre\u003e\u003cp\u003e\u003cem\u003e(Set OPENAI_API_KEY to enable AI explanations.)\u003c/em\u003e\u003c/p\u003e","endLine":57,"symbolName":"com.hackathon.actions.EndTourAction","type":"class"},{"filePath":"C:/Users/milan/OneDrive/Desktop/Plugin ORIGINAL/JB-plugin/src/main/java/com/hackathon/actions/EndTourAction.java","lineNum":17,"codeSnippet":"    public @NotNull ActionUpdateThread getActionUpdateThread() {\n        return ActionUpdateThread.BGT;\n    }","authorNote":"","aiExplanation":"\u003ch3\u003eAuthor Note\u003c/h3\u003e\u003cp\u003e\u003c/p\u003e\u003ch3\u003eCode\u003c/h3\u003e\u003cpre\u003e    public @NotNull ActionUpdateThread getActionUpdateThread() {\n        return ActionUpdateThread.BGT;\n    }\u003c/pre\u003e\u003cp\u003e\u003cem\u003e(Set OPENAI_API_KEY to enable AI explanations.)\u003c/em\u003e\u003c/p\u003e","endLine":19,"symbolName":"com.hackathon.actions.EndTourAction#getActionUpdateThread","type":"method"},{"filePath":"C:/Users/milan/OneDrive/Desktop/Plugin ORIGINAL/JB-plugin/src/main/java/com/hackathon/actions/EndTourAction.java","lineNum":22,"codeSnippet":"    public void update(@NotNull AnActionEvent e) {\n        Project project \u003d e.getProject();\n        boolean visible \u003d false;\n        if (project !\u003d null) {\n            // Hide if selection mode is active\n            SelectionModeService sel \u003d project.getService(SelectionModeService.class);\n            if (sel !\u003d null \u0026\u0026 sel.isEnabled()) {\n                e.getPresentation().setEnabledAndVisible(false);\n                return;\n            }\n\n            TourStateService state \u003d project.getService(TourStateService.class);\n            // Visible if tour has steps (is loaded)\n            visible \u003d state !\u003d null \u0026\u0026 !state.getSteps().isEmpty();\n        }\n        e.getPresentation().setEnabledAndVisible(visible);\n    }","authorNote":"","aiExplanation":"\u003ch3\u003eAuthor Note\u003c/h3\u003e\u003cp\u003e\u003c/p\u003e\u003ch3\u003eCode\u003c/h3\u003e\u003cpre\u003e    public void update(@NotNull AnActionEvent e) {\n        Project project \u003d e.getProject();\n        boolean visible \u003d false;\n        if (project !\u003d null) {\n            // Hide if selection mode is active\n            SelectionModeService sel \u003d project.getService(SelectionModeService.class);\n            if (sel !\u003d null \u0026amp;\u0026amp; sel.isEnabled()) {\n                e.getPresentation().setEnabledAndVisible(false);\n                return;\n            }\n\n            TourStateService state \u003d project.getService(TourStateService.class);\n            // Visible if tour has steps (is loaded)\n            visible \u003d state !\u003d null \u0026amp;\u0026amp; !state.getSteps().isEmpty();\n        }\n        e.getPresentation().setEnabledAndVisible(visible);\n    }\u003c/pre\u003e\u003cp\u003e\u003cem\u003e(Set OPENAI_API_KEY to enable AI explanations.)\u003c/em\u003e\u003c/p\u003e","endLine":38,"symbolName":"com.hackathon.actions.EndTourAction#update","type":"method"},{"filePath":"C:/Users/milan/OneDrive/Desktop/Plugin ORIGINAL/JB-plugin/src/main/java/com/hackathon/actions/EndTourAction.java","lineNum":41,"codeSnippet":"    public void actionPerformed(@NotNull AnActionEvent e) {\n        Project project \u003d e.getProject();\n        if (project \u003d\u003d null) return;\n\n        TourStateService state \u003d project.getService(TourStateService.class);\n        state.clear(); // Clear steps and index\n\n        EditorNavigationService.clearHighlight();\n        TourOverlayManager.hideAll();\n\n        // Hide tool window\n        ToolWindow toolWindow \u003d ToolWindowManager.getInstance(project).getToolWindow(\"Auto Code Walker\");\n        if (toolWindow !\u003d null) {\n            toolWindow.hide(null);\n        }\n    }","authorNote":"","aiExplanation":"\u003ch3\u003eAuthor Note\u003c/h3\u003e\u003cp\u003e\u003c/p\u003e\u003ch3\u003eCode\u003c/h3\u003e\u003cpre\u003e    public void actionPerformed(@NotNull AnActionEvent e) {\n        Project project \u003d e.getProject();\n        if (project \u003d\u003d null) return;\n\n        TourStateService state \u003d project.getService(TourStateService.class);\n        state.clear(); // Clear steps and index\n\n        EditorNavigationService.clearHighlight();\n        TourOverlayManager.hideAll();\n\n        // Hide tool window\n        ToolWindow toolWindow \u003d ToolWindowManager.getInstance(project).getToolWindow(\"Auto Code Walker\");\n        if (toolWindow !\u003d null) {\n            toolWindow.hide(null);\n        }\n    }\u003c/pre\u003e\u003cp\u003e\u003cem\u003e(Set OPENAI_API_KEY to enable AI explanations.)\u003c/em\u003e\u003c/p\u003e","endLine":56,"symbolName":"com.hackathon.actions.EndTourAction#actionPerformed","type":"method"}]}